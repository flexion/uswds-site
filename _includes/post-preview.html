{% comment %}
  Post previews used in the news feeds found on:
  - `/about/whats-new/`
  - `/about/whats-new/all`
{% endcomment %}

{% assign post = include.post %}
{% assign post_id = preview.title | default: preview.id | slugify %}

{% comment %}
  Assign header link url
  - default: link to the post's generated page
  - custom: link to a custom location declared in `url`
{% endcomment %}
{% assign post_url = site.baseurl | append: preview.url %}
{% assign preview_url = preview.url | default: post_url %}

<article id="{{ post_id }}" class="post-preview">
  <header class="post-preview__header">
    <p class="post-category site-subheading">
      {{ preview.tags[0] }}
    </p>

    <{{ include.heading | default:"h2" }} class="post-preview__title">
      {% unless preview_url == "none" %}
        <a href="{{ preview_url }}">
      {% endunless %}
          {{ preview.title }}
      {% unless preview_url == "none" %}
        </a>
      {% endunless %}
    </{{ include.heading | default:"h2" }}>

    {% include post-meta.html %}
  </header>

  <div class="post-preview__content site-prose">
    <p>
      {{ preview.lead | default: preview.excerpt | markdownify}}
    </p>
  </div>
</article>
